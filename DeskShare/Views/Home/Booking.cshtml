@{ Layout = "";}

<script>
    var Urls =
    {
        logoutUrl: '@Url.Action("LogOut", "Home")',
        adminUrl: '@Url.Action("Admin", "Home")',
        getMybookingsUrl: '@Url.Action("GetMyBookings","Home")',
        GetLocationsAndBookingsUrl: '@Url.Action("GetLocationsAndBookings", "Home")',
        deleteBookingsUrl: '@Url.Action("DeleteBooking","Home")',
        createBookingsUrl: '@Url.Action("CreateBooking","Home")'
    }
</script>

<html lang="de">
<head>
    <title>DeskShare - Raumbuchung</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <script src="~/js/deskshare.js" type="text/javascript"></script>
    <script src="~/lib/jquery/dist/jquery.js" type="text/javascript"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.js" type="text/javascript"></script>
    <script src="~/lib/jquery/dtsel.js" type="text/javascript"></script>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="~/lib/jquery/dtsel.css" />
    <link rel="stylesheet" href="~/lib/Font-Awesome-fa-4/css/font-awesome.css" />
    <link rel="stylesheet" href="~/css/deskshare.css" />

</head>
<body>
    <div id="bg"></div>
    <div class="header">
        <h1>Deskshare</h1>
        <p style="color:orange;">Raumbuchung</p>
    </div>

    @*navbar*@
    <nav id="navbar" style="z-index: 9999" class="navbar navbar-expand-md bg-dark navbar-dark">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" style="cursor: pointer" id="navAdmin">Verwaltung</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="cursor: pointer" id="navBookings">Meine Buchungen</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="cursor: pointer" id="navLogout">Abmelden</a>
                </li>
            </ul>
        </div>
    </nav>

    @*maincontent*@
    <div id="cntRow" class="row maincontent">
        <div class="side">
            <h5 class="form-inline">Meine aktiven Buchungen:<i id="loader" class="fa fa-spinner fa-pulse fa-fw"></i></h5>
            <span id="lastbookings"></span>
        </div>
        <div class="main">
            <i id="loaderMain" class="fa fa-spinner fa-pulse fa-2x fa-fw"></i>
            <div id="main" style="display: none">
                <div class="row">
                    <a href="#filterContainer" class="toggle" style="font-weight:bold">Filter <i class="fa fa-filter" aria-hidden="true" style="color: orange"></i></a>
                    <div id="filterContainer" class="toggle-content">
                        <div class="container row">
                            <div class="col-4"><input type="checkbox" id="cbTodayFree" /><label for="cbTodayFree" class="filterLabel"> Heute frei</label></div>
                            <div class="col-4"><input type="checkbox" id="cbTomorrowFree" /><label for="cbTomorrowFree"class="filterLabel"> Morgen frei</label></div>
                            <div class="col-4"><input type="checkbox" id="cbWeekFree" /><label for="cbWeekFree"class="filterLabel"> Diese Woche frei</label></div>
                        </div>
                        <div class="container row">
                            <div class="col-4"><input type="checkbox" id="cbMouse" /><label for="cbMouse"class="filterLabel"> Maus vorhanden</label></div>
                            <div class="col-4"><input type="checkbox" id="cbComputer" /><label for="cbComputer"class="filterLabel"> Computer vorhanden</label></div>
                            <div class="col-4"><input type="checkbox" id="cbDocking" /><label for="cbDocking"class="filterLabel"> Dockingstation vorhanden</label></div>
                            <div class="col-4"><input type="checkbox" id="cbKeyboard" /><label for="cbKeyboard"class="filterLabel"> Tastatur vorhanden</label></div>
                        </div>
                        <div class="container row">
                            <div class="col-4"><input type="checkbox" id="cbNoScreens" /><label for="cbNoScreens"class="filterLabel"> ohne Bildschirm</label></div>
                            <div class="col-4"><input type="checkbox" id="cbOneScreens" /> <label for="cbOneScreens"class="filterLabel"> 1 Bildschirm</label></div>
                            <div class="col-4"><input type="checkbox" id="cbTwoScreens" /> <label for="cbTwoScreens"class="filterLabel"> 2 Bildschirme</label></div>
                            <div class="col-4"><input type="checkbox" id="cbThreeScreens" /> <label for="cbThreeScreens"class="filterLabel"> 3 oder mehr Bildschirme</label></div>
                        </div>
                        <div class="col-4"></div>
                        <div class="btn btn-success" onclick="GetLocationsAndBookings()">Filter anwenden</div>
                    </div>
                </div>
                <br />
                <span id="allbookings"></span>
            </div>
        </div>
    </div>
</body>
</html>


<script>
    $(window).submit(function (e) {
        e.preventDefault();
    });

    //set all control events and get all data
    $(window).on('load', function () {
        setNavbarEvents();
        getMyBookings();
        GetLocationsAndBookings();
        addToggleEvents();
    });

    ////navbar sticky scroll
    //$(window).on('scroll', function () {
    //    var navbar = document.getElementById("navbar");
    //    var sticky = navbar.offsetTop;
       
    //    if (document.getElementById("cntRow").offsetTop <= sticky) {
    //        navbar.classList.add("sticky");
    //    } else {
    //        navbar.classList.remove("sticky");
    //    }
    //});

    function setNavbarEvents() {
        //logout on navbar btn
        $("#navLogout").on("click", function () {
            window.$.ajax({
                url: window.Urls.logoutUrl,
                type: "GET",
                success: function () {
                    $(location).attr("href", "/Home/Index");
                }
            });
        });

        //open adminform on navbar btn
        $("#navAdmin").click(function () {
            window.$.ajax({
                url: window.Urls.adminUrl,
                type: "GET",
                success: function () {
                    $(location).attr("href", "/Home/Admin");
                },
                error: function () {
                    alert("Unzureichende Berechtigung");
                }
            });
        });
    }



</script>




